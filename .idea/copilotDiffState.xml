<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/pom.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/pom.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&#10;         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#10;    &lt;groupId&gt;ar.utn.ba.ddsi&lt;/groupId&gt;&#10;    &lt;artifactId&gt;apipublica&lt;/artifactId&gt;&#10;    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&#10;    &lt;parent&gt;&#10;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;        &lt;version&gt;3.5.5&lt;/version&gt;&#10;        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;    &lt;/parent&gt;&#10;&#10;    &lt;name&gt;apipublica&lt;/name&gt;&#10;    &lt;description&gt;Demo API Publica&lt;/description&gt;&#10;&#10;    &lt;properties&gt;&#10;        &lt;java.version&gt;17&lt;/java.version&gt;&#10;        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;&#10;    &lt;/properties&gt;&#10;    &lt;dependencies&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;com.h2database&lt;/groupId&gt;&#10;            &lt;artifactId&gt;h2&lt;/artifactId&gt;&#10;            &lt;scope&gt;runtime&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;com.mysql&lt;/groupId&gt;&#10;            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;&#10;            &lt;scope&gt;runtime&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;            &lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;            &lt;optional&gt;true&lt;/optional&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;!-- Jackson Databind --&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;&#10;            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;!-- JUnit Jupiter --&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;&#10;            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;&#10;            &lt;version&gt;5.9.2&lt;/version&gt;&#10;            &lt;scope&gt;test&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;            &lt;scope&gt;test&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;    &lt;/dependencies&gt;&#10;    &lt;build&gt;&#10;        &lt;plugins&gt;&#10;            &lt;plugin&gt;&#10;                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;                &lt;configuration&gt;&#10;                    &lt;mainClass&gt;ar.utn.ba.ddsi.apipublica.ApiPublicaApplication&lt;/mainClass&gt;&#10;                &lt;/configuration&gt;&#10;            &lt;/plugin&gt;&#10;        &lt;/plugins&gt;&#10;    &lt;/build&gt;&#10;&lt;/project&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&#10;         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#10;    &lt;groupId&gt;ar.utn.ba.ddsi&lt;/groupId&gt;&#10;    &lt;artifactId&gt;apipublica&lt;/artifactId&gt;&#10;    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&#10;    &lt;parent&gt;&#10;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;        &lt;version&gt;3.5.5&lt;/version&gt;&#10;        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;    &lt;/parent&gt;&#10;&#10;    &lt;name&gt;apipublica&lt;/name&gt;&#10;    &lt;description&gt;Demo API Publica&lt;/description&gt;&#10;&#10;    &lt;properties&gt;&#10;        &lt;java.version&gt;17&lt;/java.version&gt;&#10;        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;&#10;    &lt;/properties&gt;&#10;    &lt;dependencies&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;com.h2database&lt;/groupId&gt;&#10;            &lt;artifactId&gt;h2&lt;/artifactId&gt;&#10;            &lt;scope&gt;runtime&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;com.mysql&lt;/groupId&gt;&#10;            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;&#10;            &lt;scope&gt;runtime&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;            &lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;            &lt;optional&gt;true&lt;/optional&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;!-- Jackson Databind --&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;&#10;            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;!-- JUnit Jupiter --&gt;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;&#10;            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;&#10;            &lt;version&gt;5.9.2&lt;/version&gt;&#10;            &lt;scope&gt;test&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;&#10;        &lt;dependency&gt;&#10;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;            &lt;scope&gt;test&lt;/scope&gt;&#10;        &lt;/dependency&gt;&#10;    &lt;/dependencies&gt;&#10;    &lt;build&gt;&#10;        &lt;plugins&gt;&#10;            &lt;plugin&gt;&#10;                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;                &lt;configuration&gt;&#10;                    &lt;mainClass&gt;ar.utn.ba.ddsi.apipublica.ApiPublicaApplication&lt;/mainClass&gt;&#10;                &lt;/configuration&gt;&#10;            &lt;/plugin&gt;&#10;        &lt;/plugins&gt;&#10;    &lt;/build&gt;&#10;&lt;/project&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/ApiPublicaApplication.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/ApiPublicaApplication.java" />
              <option name="originalContent" value="package ar.utn.ba.ddsi.apipublica;&#10;&#10;import org.springframework.boot.SpringApplication;&#10;import org.springframework.boot.autoconfigure.SpringBootApplication;&#10;&#10;//TIP To &lt;b&gt;Run&lt;/b&gt; code, press &lt;shortcut actionId=&quot;Run&quot;/&gt; or&#10;// click the &lt;icon src=&quot;AllIcons.Actions.Execute&quot;/&gt; icon in the gutter.&#10;@SpringBootApplication&#10;public class ApiPublicaApplication {&#10;    public static void main(String[] args) {&#10;        SpringApplication.run(ApiPublicaApplication.class, args);&#10;        System.out.println(&quot;API PUBLICA INICIADA&quot;);&#10;    }&#10;}" />
              <option name="updatedContent" value="package ar.utn.ba.ddsi.apipublica;&#10;&#10;import org.springframework.boot.SpringApplication;&#10;import org.springframework.boot.autoconfigure.SpringBootApplication;&#10;&#10;//TIP To &lt;b&gt;Run&lt;/b&gt; code, press &lt;shortcut actionId=&quot;Run&quot;/&gt; or&#10;// click the &lt;icon src=&quot;AllIcons.Actions.Execute&quot;/&gt; icon in the gutter.&#10;@SpringBootApplication&#10;public class ApiPublicaApplication {&#10;    public static void main(String[] args) {&#10;        SpringApplication.run(ApiPublicaApplication.class, args);&#10;        System.out.println(&quot;API PUBLICA INICIADA&quot;);&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/controllers/ColecionController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/controllers/ColecionController.java" />
              <option name="originalContent" value="package ar.utn.ba.ddsi.apipublica.controllers;&#10;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.dtos.HechoFilterDTO;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.*;&#10;import ar.utn.ba.ddsi.apipublica.services.ColeccionService;&#10;import org.springframework.http.HttpStatus;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.web.bind.annotation.GetMapping;&#10;import org.springframework.web.bind.annotation.PathVariable;&#10;import org.springframework.web.bind.annotation.RequestMapping;&#10;import org.springframework.web.bind.annotation.RestController;&#10;import org.springframework.web.bind.annotation.RequestParam;&#10;&#10;import java.util.List;&#10;&#10;@RestController&#10;@RequestMapping(&quot;/colecciones&quot;)&#10;public class ColecionController {&#10;   // ● Consulta de hechos dentro de una colección.&#10;    private final ColeccionService coleccionService;&#10;    public ColecionController(ColeccionService coleccionService) {&#10;        this.coleccionService = coleccionService;&#10;    }&#10;&#10;    @GetMapping(&quot;/{coleccionID}/hechos&quot;)&#10;    public ResponseEntity&lt;List&lt;Hecho&gt;&gt; ListarHechosDeUnaColeccionSegún(&#10;            @PathVariable(&quot;coleccionID&quot;) Long coleccionID,&#10;            @RequestParam(required = false) String modoNavegacion,&#10;            @RequestParam(value = &quot;categoria&quot;, required = false) String categoria,&#10;            @RequestParam(value = &quot;fecha_reporte_desde&quot;, required = false) String fechaReporteDesde,&#10;            @RequestParam(value = &quot;fecha_reporte_hasta&quot;, required = false) String fechaReporteHasta,&#10;            @RequestParam(value = &quot;fecha_acontecimiento_desde&quot;, required = false) String fechaAcontecimientoDesde,&#10;            @RequestParam(value = &quot;fecha_acontecimiento_hasta&quot;, required = false) String fechaAcontecimientoHasta,&#10;            @RequestParam(value = &quot;ubicacion_latitud&quot;, required = false) String latStr,&#10;            @RequestParam(value = &quot;ubicacion_longitud&quot;, required = false) String lonStr&#10;    ) {&#10;        HechoFilterDTO filter = new HechoFilterDTO(categoria, fechaReporteDesde, fechaReporteHasta,&#10;                fechaAcontecimientoDesde, fechaAcontecimientoHasta, latStr, lonStr);&#10;&#10;        try {&#10;            List&lt;Hecho&gt; resultados = coleccionService.buscarHechosSegun(filter, modoNavegacion, coleccionID);&#10;            return ResponseEntity.status(HttpStatus.OK).body(resultados);&#10;&#10;        } catch (IllegalArgumentException iae) {&#10;            return ResponseEntity.badRequest().body(iae.getMessage());&#10;        } catch (Exception ex) {&#10;            return ResponseEntity.status(500).body(&quot;Error buscando hechos: &quot; + ex.getMessage());&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package ar.utn.ba.ddsi.apipublica.controllers;&#10;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.dtos.HechoFilterDTO;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.*;&#10;import ar.utn.ba.ddsi.apipublica.services.ColeccionService;&#10;import org.springframework.http.HttpStatus;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.web.bind.annotation.GetMapping;&#10;import org.springframework.web.bind.annotation.PathVariable;&#10;import org.springframework.web.bind.annotation.RequestMapping;&#10;import org.springframework.web.bind.annotation.RestController;&#10;import org.springframework.web.bind.annotation.RequestParam;&#10;&#10;import java.util.List;&#10;&#10;@RestController&#10;@RequestMapping(&quot;/colecciones&quot;)&#10;public class ColecionController {&#10;   // ● Consulta de hechos dentro de una colección.&#10;    private final ColeccionService coleccionService;&#10;    public ColecionController(ColeccionService coleccionService) {&#10;        this.coleccionService = coleccionService;&#10;    }&#10;&#10;    @GetMapping(&quot;/{coleccionID}/hechos&quot;)&#10;    public ResponseEntity&lt;List&lt;Hecho&gt;&gt; ListarHechosDeUnaColeccionSegún(&#10;            @PathVariable(&quot;coleccionID&quot;) Long coleccionID,&#10;            @RequestParam(required = false) String modoNavegacion,&#10;            @RequestParam(value = &quot;categoria&quot;, required = false) String categoria,&#10;            @RequestParam(value = &quot;fecha_reporte_desde&quot;, required = false) String fechaReporteDesde,&#10;            @RequestParam(value = &quot;fecha_reporte_hasta&quot;, required = false) String fechaReporteHasta,&#10;            @RequestParam(value = &quot;fecha_acontecimiento_desde&quot;, required = false) String fechaAcontecimientoDesde,&#10;            @RequestParam(value = &quot;fecha_acontecimiento_hasta&quot;, required = false) String fechaAcontecimientoHasta,&#10;            @RequestParam(value = &quot;ubicacion_latitud&quot;, required = false) String latStr,&#10;            @RequestParam(value = &quot;ubicacion_longitud&quot;, required = false) String lonStr&#10;    ) {&#10;        HechoFilterDTO filter = new HechoFilterDTO(categoria, fechaReporteDesde, fechaReporteHasta,&#10;                fechaAcontecimientoDesde, fechaAcontecimientoHasta, latStr, lonStr);&#10;&#10;        try {&#10;            List&lt;Hecho&gt; resultados = coleccionService.buscarHechosSegun(filter, modoNavegacion, coleccionID);&#10;            return ResponseEntity.status(HttpStatus.OK).body(resultados);&#10;&#10;        } catch (IllegalArgumentException iae) {&#10;            return ResponseEntity.badRequest().body(iae.getMessage());&#10;        } catch (Exception ex) {&#10;            return ResponseEntity.status(500).body(&quot;Error buscando hechos: &quot; + ex.getMessage());&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/models/repository/ContribuyenteRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/models/repository/ContribuyenteRepository.java" />
              <option name="originalContent" value="package ar.utn.ba.ddsi.apipublica.models.repository;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.Contribuyente;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;@Repository&#10;public interface ContribuyenteRepository extends JpaRepository&lt;Contribuyente, Long&gt; {&#10;    // JpaRepository ya provee findById, findAll, save, delete, etc.&#10;}&#10;" />
              <option name="updatedContent" value="package ar.utn.ba.ddsi.apipublica.models.repository;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.Contribuyente;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;@Repository&#10;public interface ContribuyenteRepository extends JpaRepository&lt;Contribuyente, Long&gt; {&#10;    // JpaRepository ya provee findById, findAll, save, delete, etc.&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/models/repository/HechoRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/models/repository/HechoRepository.java" />
              <option name="originalContent" value="package ar.utn.ba.ddsi.apipublica.models.repository;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.Hecho;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.data.jpa.repository.Query;&#10;import org.springframework.data.repository.query.Param;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import java.time.LocalDate;&#10;import java.util.List;&#10;&#10;@Repository&#10;public interface HechoRepository extends JpaRepository&lt;Hecho, Long&gt; {&#10;    //REVISAR la Consulta&#10;    @Query(&quot;SELECT h FROM Hecho h &quot; +&#10;            &quot;WHERE (:categoriaNombre IS NULL OR LOWER(h.categoria.nombre) = LOWER(:categoriaNombre)) &quot; +&#10;            &quot;AND (:repDesde IS NULL OR h.fechaDeCarga &gt;= :repDesde) &quot; +&#10;            &quot;AND (:repHasta IS NULL OR h.fechaDeCarga &lt;= :repHasta) &quot; +&#10;            &quot;AND (:acaDesde IS NULL OR h.fecha &gt;= :acaDesde) &quot; +&#10;            &quot;AND (:acaHasta IS NULL OR h.fecha &lt;= :acaHasta) &quot; +&#10;            &quot;AND (:lat IS NULL OR :lon IS NULL OR (ABS(h.ubicacion.latitud - :lat) &lt;= :tol AND ABS(h.ubicacion.longitud - :lon) &lt;= :tol))&quot;)&#10;    List&lt;Hecho&gt; findByFilters(&#10;            @Param(&quot;categoriaNombre&quot;) String categoriaNombre,&#10;            @Param(&quot;repDesde&quot;) LocalDate repDesde,&#10;            @Param(&quot;repHasta&quot;) LocalDate repHasta,&#10;            @Param(&quot;acaDesde&quot;) LocalDate acaDesde,&#10;            @Param(&quot;acaHasta&quot;) LocalDate acaHasta,&#10;            @Param(&quot;lat&quot;) Float lat,&#10;            @Param(&quot;lon&quot;) Float lon&#10;    );&#10;" />
              <option name="updatedContent" value="package ar.utn.ba.ddsi.apipublica.models.repository;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.Hecho;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.data.jpa.repository.Query;&#10;import org.springframework.data.repository.query.Param;&#10;import org.springframework.stereotype.Repository;&#10;&#10;import java.time.LocalDate;&#10;import java.util.List;&#10;&#10;@Repository&#10;public interface HechoRepository extends JpaRepository&lt;Hecho, Long&gt; {&#10;    //REVISAR la Consulta&#10;    @Query(&quot;SELECT h FROM Hecho h &quot; +&#10;            &quot;WHERE (:categoriaNombre IS NULL OR LOWER(h.categoria.nombre) = LOWER(:categoriaNombre)) &quot; +&#10;            &quot;AND (:repDesde IS NULL OR h.fechaDeCarga &gt;= :repDesde) &quot; +&#10;            &quot;AND (:repHasta IS NULL OR h.fechaDeCarga &lt;= :repHasta) &quot; +&#10;            &quot;AND (:acaDesde IS NULL OR h.fecha &gt;= :acaDesde) &quot; +&#10;            &quot;AND (:acaHasta IS NULL OR h.fecha &lt;= :acaHasta) &quot; +&#10;            &quot;AND (:lat IS NULL OR :lon IS NULL OR (ABS(h.ubicacion.latitud - :lat) &lt;= :tol AND ABS(h.ubicacion.longitud - :lon) &lt;= :tol))&quot;)&#10;    List&lt;Hecho&gt; findByFilters(&#10;            @Param(&quot;categoriaNombre&quot;) String categoriaNombre,&#10;            @Param(&quot;repDesde&quot;) LocalDate repDesde,&#10;            @Param(&quot;repHasta&quot;) LocalDate repHasta,&#10;            @Param(&quot;acaDesde&quot;) LocalDate acaDesde,&#10;            @Param(&quot;acaHasta&quot;) LocalDate acaHasta,&#10;            @Param(&quot;lat&quot;) Float lat,&#10;            @Param(&quot;lon&quot;) Float lon&#10;    );&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/models/repository/SolicitudRepository.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/models/repository/SolicitudRepository.java" />
              <option name="originalContent" value="package ar.utn.ba.ddsi.apipublica.models.repository;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.SolicitudEliminacion;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;@Repository&#10;public interface SolicitudRepository extends JpaRepository&lt;SolicitudEliminacion, Long&gt; {&#10;}&#10;" />
              <option name="updatedContent" value="package ar.utn.ba.ddsi.apipublica.models.repository;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.SolicitudEliminacion;&#10;import org.springframework.data.jpa.repository.JpaRepository;&#10;import org.springframework.stereotype.Repository;&#10;&#10;@Repository&#10;public interface SolicitudRepository extends JpaRepository&lt;SolicitudEliminacion, Long&gt; {&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/services/ColeccionService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/services/ColeccionService.java" />
              <option name="originalContent" value="package ar.utn.ba.ddsi.apipublica.services;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.dtos.HechoFilterDTO;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.*;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.FiltradorDeHechos;&#10;import ar.utn.ba.ddsi.apipublica.models.repository.ColeccionRepository;&#10;import ar.utn.ba.ddsi.apipublica.models.repository.HechoRepository;&#10;import org.springframework.stereotype.Service;&#10;&#10;import java.time.LocalDate;&#10;import java.time.format.DateTimeParseException;&#10;import java.util.List;&#10;&#10;@Service&#10;public class ColeccionService {&#10;    private final ColeccionRepository coleccionRepository;&#10;    private final HechoRepository hechoRepository;&#10;    private final FiltradorDeHechos filtradorDeHechos;&#10;&#10;    public ColeccionService(ColeccionRepository coleccionRepository, HechoRepository hechoRepository, FiltradorDeHechos filtradorDeHechos) {&#10;        this.coleccionRepository = coleccionRepository;&#10;        this.hechoRepository = hechoRepository;&#10;        this.filtradorDeHechos = filtradorDeHechos;&#10;    }&#10;&#10;    public List&lt;Hecho&gt; getHechosByColeccionId(Long id) {&#10;        Coleccion coleccion = coleccionRepository.findById(id).orElse(null);&#10;        if (coleccion == null) return null;&#10;        return coleccion.obtenerTodosLosHechos();&#10;    }&#10;&#10;&#10;    public List&lt;Hecho&gt; getHechosByColeccionAndModo(Long coleccionId, EnumModoNavegacion modo) {&#10;        var coleccion = coleccionRepository.findById(coleccionId).orElse(null);&#10;        if (coleccion == null) return null;&#10;&#10;        // Interpretar null/empty como NOCURADO&#10;        if (modo == null || modo == EnumModoNavegacion.NOCURADO) {&#10;            return coleccion.obtenerTodosLosHechos();&#10;        }&#10;&#10;        // Si es CURADO, aplicar algoritmo de consenso si existe&#10;        if (modo == EnumModoNavegacion.CURADO) {&#10;            return coleccion.obtenerSoloHechosConsensuados();&#10;        }&#10;        return coleccion.obtenerTodosLosHechos();&#10;    }&#10;&#10;    public List&lt;Hecho&gt; filtrarHechosConCondiciones(Long coleccionId, List&lt;InterfaceCondicion&gt; condiciones) {&#10;        var coleccion = coleccionRepository.findById(coleccionId).orElse(null);&#10;        if (coleccion == null) return null;&#10;        return filtradorDeHechos.devolverHechosAPartirDe(condiciones, coleccion.obtenerTodosLosHechos());&#10;    }&#10;&#10;    // Nuevo: buscar hechos de una colección delegando al repository con parámetros parsed del DTO&#10;    public List&lt;Hecho&gt; buscarHechosSegun(HechoFilterDTO filter, String modoDeNavegacion, Long coleccionId) {&#10;        if (filter == null) filter = new HechoFilterDTO();&#10;&#10;        // Normalizar categoria&#10;        String categoriaNombre = null;&#10;        if (filter.getCategoria() != null &amp;&amp; !filter.getCategoria().isBlank()) {&#10;            categoriaNombre = filter.getCategoria().trim();&#10;        }&#10;&#10;        LocalDate repDesde = null, repHasta = null, acaDesde = null, acaHasta = null;&#10;        try {&#10;            if (filter.getFechaReporteDesde() != null &amp;&amp; !filter.getFechaReporteDesde().isBlank()) repDesde = LocalDate.parse(filter.getFechaReporteDesde());&#10;            if (filter.getFechaReporteHasta() != null &amp;&amp; !filter.getFechaReporteHasta().isBlank()) repHasta = LocalDate.parse(filter.getFechaReporteHasta());&#10;            if (filter.getFechaAcontecimientoDesde() != null &amp;&amp; !filter.getFechaAcontecimientoDesde().isBlank()) acaDesde = LocalDate.parse(filter.getFechaAcontecimientoDesde());&#10;            if (filter.getFechaAcontecimientoHasta() != null &amp;&amp; !filter.getFechaAcontecimientoHasta().isBlank()) acaHasta = LocalDate.parse(filter.getFechaAcontecimientoHasta());&#10;        } catch (DateTimeParseException dte) {&#10;            throw new IllegalArgumentException(&quot;Formato de fecha inválido. Use yyyy-MM-dd&quot;);&#10;        }&#10;&#10;        Float lat = null, lon = null;&#10;        try {&#10;            if (filter.getUbicacionLatitud() != null &amp;&amp; !filter.getUbicacionLatitud().isBlank()) lat = Float.parseFloat(filter.getUbicacionLatitud());&#10;            if (filter.getUbicacionLongitud() != null &amp;&amp; !filter.getUbicacionLongitud().isBlank()) lon = Float.parseFloat(filter.getUbicacionLongitud());&#10;        } catch (NumberFormatException nfe) {&#10;            throw new IllegalArgumentException(&quot;Latitud o longitud invalida&quot;);&#10;        }&#10;&#10;        // Determinar si debemos filtrar solo consensuados (modo CURADO)&#10;        Boolean curado = null; // null = no filtrar por consensuado&#10;        if (modoDeNavegacion != null &amp;&amp; modoDeNavegacion.equalsIgnoreCase(&quot;CURADO&quot;)) {&#10;            curado = Boolean.TRUE;&#10;        }&#10;&#10;        // Tolerancia para comparación de coordenadas (en grados, ejemplo 0.01 ~ 1km aprox)&#10;        Float tol = 0.01f;&#10;&#10;        // Delegar al repository que arma la consulta en la DB&#10;        return hechoRepository.findByFiltersInColeccion(coleccionId, categoriaNombre, repDesde, repHasta, acaDesde, acaHasta, lat, lon, curado, tol);&#10;    }&#10;}" />
              <option name="updatedContent" value="package ar.utn.ba.ddsi.apipublica.services;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.dtos.HechoFilterDTO;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.*;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.FiltradorDeHechos;&#10;import ar.utn.ba.ddsi.apipublica.models.repository.ColeccionRepository;&#10;import ar.utn.ba.ddsi.apipublica.models.repository.HechoRepository;&#10;import org.springframework.stereotype.Service;&#10;&#10;import java.time.LocalDate;&#10;import java.time.format.DateTimeParseException;&#10;import java.util.List;&#10;&#10;@Service&#10;public class ColeccionService {&#10;    private final ColeccionRepository coleccionRepository;&#10;    private final HechoRepository hechoRepository;&#10;    private final FiltradorDeHechos filtradorDeHechos;&#10;&#10;    public ColeccionService(ColeccionRepository coleccionRepository, HechoRepository hechoRepository, FiltradorDeHechos filtradorDeHechos) {&#10;        this.coleccionRepository = coleccionRepository;&#10;        this.hechoRepository = hechoRepository;&#10;        this.filtradorDeHechos = filtradorDeHechos;&#10;    }&#10;&#10;    public List&lt;Hecho&gt; getHechosByColeccionId(Long id) {&#10;        Coleccion coleccion = coleccionRepository.findById(id).orElse(null);&#10;        if (coleccion == null) return null;&#10;        return coleccion.obtenerTodosLosHechos();&#10;    }&#10;&#10;&#10;    public List&lt;Hecho&gt; getHechosByColeccionAndModo(Long coleccionId, EnumModoNavegacion modo) {&#10;        var coleccion = coleccionRepository.findById(coleccionId).orElse(null);&#10;        if (coleccion == null) return null;&#10;&#10;        // Interpretar null/empty como NOCURADO&#10;        if (modo == null || modo == EnumModoNavegacion.NOCURADO) {&#10;            return coleccion.obtenerTodosLosHechos();&#10;        }&#10;&#10;        // Si es CURADO, aplicar algoritmo de consenso si existe&#10;        if (modo == EnumModoNavegacion.CURADO) {&#10;            return coleccion.obtenerSoloHechosConsensuados();&#10;        }&#10;        return coleccion.obtenerTodosLosHechos();&#10;    }&#10;&#10;    public List&lt;Hecho&gt; filtrarHechosConCondiciones(Long coleccionId, List&lt;InterfaceCondicion&gt; condiciones) {&#10;        var coleccion = coleccionRepository.findById(coleccionId).orElse(null);&#10;        if (coleccion == null) return null;&#10;        return filtradorDeHechos.devolverHechosAPartirDe(condiciones, coleccion.obtenerTodosLosHechos());&#10;    }&#10;&#10;    // Nuevo: buscar hechos de una colección delegando al repository con parámetros parsed del DTO&#10;    public List&lt;Hecho&gt; buscarHechosSegun(HechoFilterDTO filter, String modoDeNavegacion, Long coleccionId) {&#10;        if (filter == null) filter = new HechoFilterDTO();&#10;&#10;        // Normalizar categoria&#10;        String categoriaNombre = null;&#10;        if (filter.getCategoria() != null &amp;&amp; !filter.getCategoria().isBlank()) {&#10;            categoriaNombre = filter.getCategoria().trim();&#10;        }&#10;&#10;        LocalDate repDesde = null, repHasta = null, acaDesde = null, acaHasta = null;&#10;        try {&#10;            if (filter.getFechaReporteDesde() != null &amp;&amp; !filter.getFechaReporteDesde().isBlank()) repDesde = LocalDate.parse(filter.getFechaReporteDesde());&#10;            if (filter.getFechaReporteHasta() != null &amp;&amp; !filter.getFechaReporteHasta().isBlank()) repHasta = LocalDate.parse(filter.getFechaReporteHasta());&#10;            if (filter.getFechaAcontecimientoDesde() != null &amp;&amp; !filter.getFechaAcontecimientoDesde().isBlank()) acaDesde = LocalDate.parse(filter.getFechaAcontecimientoDesde());&#10;            if (filter.getFechaAcontecimientoHasta() != null &amp;&amp; !filter.getFechaAcontecimientoHasta().isBlank()) acaHasta = LocalDate.parse(filter.getFechaAcontecimientoHasta());&#10;        } catch (DateTimeParseException dte) {&#10;            throw new IllegalArgumentException(&quot;Formato de fecha inválido. Use yyyy-MM-dd&quot;);&#10;        }&#10;&#10;        Float lat = null, lon = null;&#10;        try {&#10;            if (filter.getUbicacionLatitud() != null &amp;&amp; !filter.getUbicacionLatitud().isBlank()) lat = Float.parseFloat(filter.getUbicacionLatitud());&#10;            if (filter.getUbicacionLongitud() != null &amp;&amp; !filter.getUbicacionLongitud().isBlank()) lon = Float.parseFloat(filter.getUbicacionLongitud());&#10;        } catch (NumberFormatException nfe) {&#10;            throw new IllegalArgumentException(&quot;Latitud o longitud invalida&quot;);&#10;        }&#10;&#10;        // Determinar si debemos filtrar solo consensuados (modo CURADO)&#10;        Boolean curado = null; // null = no filtrar por consensuado&#10;        if (modoDeNavegacion != null &amp;&amp; modoDeNavegacion.equalsIgnoreCase(&quot;CURADO&quot;)) {&#10;            curado = Boolean.TRUE;&#10;        }&#10;&#10;        // Tolerancia para comparación de coordenadas (en grados, ejemplo 0.01 ~ 1km aprox)&#10;        Float tol = 0.01f;&#10;&#10;        // Delegar al repository que arma la consulta en la DB&#10;        return hechoRepository.findByFiltersInColeccion(coleccionId, categoriaNombre, repDesde, repHasta, acaDesde, acaHasta, lat, lon, curado, tol);&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/services/HechoService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/services/HechoService.java" />
              <option name="originalContent" value="package ar.utn.ba.ddsi.apipublica.services;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.dtos.HechoCreateDTO;&#10;import ar.utn.ba.ddsi.apipublica.models.dtos.HechoFilterDTO;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.Hecho;&#10;import ar.utn.ba.ddsi.apipublica.models.repository.HechoRepository;&#10;import org.springframework.stereotype.Service;&#10;&#10;import java.time.LocalDate;&#10;import java.time.format.DateTimeParseException;&#10;import java.util.List;&#10;&#10;@Service&#10;public class HechoService implements IHechoService {&#10;&#10;    private final HechoRepository hechoRepository;&#10;&#10;    public HechoService(HechoRepository hechoRepository) {&#10;        this.hechoRepository = hechoRepository;&#10;    }&#10;&#10;    @Override&#10;    public Hecho crearHecho(HechoCreateDTO dto){&#10;        // Lógica de conversión y creación&#10;        Hecho hecho = new Hecho();&#10;        hecho.setTitulo(dto.getTitulo());&#10;        hecho.setDescripcion(dto.getDescripcion());&#10;&#10;        // Conversión segura de fecha&#10;        if (dto.getFecha() != null &amp;&amp; !dto.getFecha().isBlank()) {&#10;            try {&#10;                hecho.setFecha(LocalDate.parse(dto.getFecha()));&#10;            } catch (DateTimeParseException e) {&#10;                // excepción personalizada si la fecha es inválida  VER ESTO DEL FORMATO&#10;                throw new IllegalArgumentException(&quot;Formato de fecha inválido: &quot; + dto.getFecha());&#10;            }&#10;        }&#10;&#10;        // Guardar en la base de datos&#10;        return hechoRepository.save(hecho);&#10;    }&#10;&#10;    @Override&#10;    public List&lt;Hecho&gt; buscarConFiltro(HechoFilterDTO filter) {&#10;        if (filter == null) {&#10;            return hechoRepository.findAll();&#10;        }&#10;&#10;        String categoriaNombre = null;&#10;        if(filter.getCategoria() != null &amp;&amp; !filter.getCategoria().isBlank()) {&#10;            categoriaNombre = filter.getCategoria();&#10;        }&#10;&#10;        LocalDate repDesde = null, repHasta = null, acaDesde = null, acaHasta = null;&#10;        try {&#10;            if (filter.getFechaReporteDesde() != null &amp;&amp; !filter.getFechaReporteDesde().isBlank()) repDesde = LocalDate.parse(filter.getFechaReporteDesde());&#10;            if (filter.getFechaReporteHasta() != null &amp;&amp; !filter.getFechaReporteHasta().isBlank()) repHasta = LocalDate.parse(filter.getFechaReporteHasta());&#10;            if (filter.getFechaAcontecimientoDesde() != null &amp;&amp; !filter.getFechaAcontecimientoDesde().isBlank()) acaDesde = LocalDate.parse(filter.getFechaAcontecimientoDesde());&#10;            if (filter.getFechaAcontecimientoHasta() != null &amp;&amp; !filter.getFechaAcontecimientoHasta().isBlank()) acaHasta = LocalDate.parse(filter.getFechaAcontecimientoHasta());&#10;        } catch (DateTimeParseException dte) {&#10;            //VER Formato de fecha inválido&#10;            throw new IllegalArgumentException(&quot;Formato de fecha inválido. Use yyyy-MM-dd&quot;);&#10;        }&#10;&#10;        Float lat = null, lon = null;&#10;        try {&#10;            if (filter.getUbicacionLatitud() != null &amp;&amp; !filter.getUbicacionLatitud().isBlank()) lat = Float.parseFloat(filter.getUbicacionLatitud());&#10;            if (filter.getUbicacionLongitud() != null &amp;&amp; !filter.getUbicacionLongitud().isBlank()) lon = Float.parseFloat(filter.getUbicacionLongitud());&#10;        } catch (NumberFormatException nfe) {&#10;            throw new IllegalArgumentException(&quot;Latitud o longitud invalida&quot;);&#10;        }&#10;        //VER le mando solo la categoria nombre no el id&#10;        return hechoRepository.findByFilters(categoriaNombre, repDesde, repHasta, acaDesde, acaHasta, lat, lon);&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package ar.utn.ba.ddsi.apipublica.services;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.dtos.HechoCreateDTO;&#10;import ar.utn.ba.ddsi.apipublica.models.dtos.HechoFilterDTO;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.Hecho;&#10;import ar.utn.ba.ddsi.apipublica.models.repository.HechoRepository;&#10;import org.springframework.stereotype.Service;&#10;&#10;import java.time.LocalDate;&#10;import java.time.format.DateTimeParseException;&#10;import java.util.List;&#10;&#10;@Service&#10;public class HechoService implements IHechoService {&#10;&#10;    private final HechoRepository hechoRepository;&#10;&#10;    public HechoService(HechoRepository hechoRepository) {&#10;        this.hechoRepository = hechoRepository;&#10;    }&#10;&#10;    @Override&#10;    public Hecho crearHecho(HechoCreateDTO dto){&#10;        // Lógica de conversión y creación&#10;        Hecho hecho = new Hecho();&#10;        hecho.setTitulo(dto.getTitulo());&#10;        hecho.setDescripcion(dto.getDescripcion());&#10;&#10;        // Conversión segura de fecha&#10;        if (dto.getFecha() != null &amp;&amp; !dto.getFecha().isBlank()) {&#10;            try {&#10;                hecho.setFecha(LocalDate.parse(dto.getFecha()));&#10;            } catch (DateTimeParseException e) {&#10;                // excepción personalizada si la fecha es inválida  VER ESTO DEL FORMATO&#10;                throw new IllegalArgumentException(&quot;Formato de fecha inválido: &quot; + dto.getFecha());&#10;            }&#10;        }&#10;&#10;        // Guardar en la base de datos&#10;        return hechoRepository.save(hecho);&#10;    }&#10;&#10;    @Override&#10;    public List&lt;Hecho&gt; buscarConFiltro(HechoFilterDTO filter) {&#10;        if (filter == null) {&#10;            return hechoRepository.findAll();&#10;        }&#10;&#10;        String categoriaNombre = null;&#10;        if(filter.getCategoria() != null &amp;&amp; !filter.getCategoria().isBlank()) {&#10;            categoriaNombre = filter.getCategoria();&#10;        }&#10;&#10;        LocalDate repDesde = null, repHasta = null, acaDesde = null, acaHasta = null;&#10;        try {&#10;            if (filter.getFechaReporteDesde() != null &amp;&amp; !filter.getFechaReporteDesde().isBlank()) repDesde = LocalDate.parse(filter.getFechaReporteDesde());&#10;            if (filter.getFechaReporteHasta() != null &amp;&amp; !filter.getFechaReporteHasta().isBlank()) repHasta = LocalDate.parse(filter.getFechaReporteHasta());&#10;            if (filter.getFechaAcontecimientoDesde() != null &amp;&amp; !filter.getFechaAcontecimientoDesde().isBlank()) acaDesde = LocalDate.parse(filter.getFechaAcontecimientoDesde());&#10;            if (filter.getFechaAcontecimientoHasta() != null &amp;&amp; !filter.getFechaAcontecimientoHasta().isBlank()) acaHasta = LocalDate.parse(filter.getFechaAcontecimientoHasta());&#10;        } catch (DateTimeParseException dte) {&#10;            //VER Formato de fecha inválido&#10;            throw new IllegalArgumentException(&quot;Formato de fecha inválido. Use yyyy-MM-dd&quot;);&#10;        }&#10;&#10;        Float lat = null, lon = null;&#10;        try {&#10;            if (filter.getUbicacionLatitud() != null &amp;&amp; !filter.getUbicacionLatitud().isBlank()) lat = Float.parseFloat(filter.getUbicacionLatitud());&#10;            if (filter.getUbicacionLongitud() != null &amp;&amp; !filter.getUbicacionLongitud().isBlank()) lon = Float.parseFloat(filter.getUbicacionLongitud());&#10;        } catch (NumberFormatException nfe) {&#10;            throw new IllegalArgumentException(&quot;Latitud o longitud invalida&quot;);&#10;        }&#10;        //VER le mando solo la categoria nombre no el id&#10;        return hechoRepository.findByFilters(categoriaNombre, repDesde, repHasta, acaDesde, acaHasta, lat, lon);&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/services/SolicitudService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/ar/utn/ba/ddsi/apipublica/services/SolicitudService.java" />
              <option name="originalContent" value="package ar.utn.ba.ddsi.apipublica.services;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.dtos.SolicitudCreateDTO;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.Contribuyente;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.Hecho;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.SolicitudEliminacion;&#10;import ar.utn.ba.ddsi.apipublica.models.repository.ContribuyenteRepository;&#10;import ar.utn.ba.ddsi.apipublica.models.repository.HechoRepository;&#10;import ar.utn.ba.ddsi.apipublica.models.repository.SolicitudRepository;&#10;import org.springframework.stereotype.Service;&#10;&#10;import java.time.LocalDate;&#10;import java.util.List;&#10;&#10;@Service&#10;public class SolicitudService implements ISolicitudService{&#10;&#10;    private final SolicitudRepository solicitudRepository;&#10;    private final HechoRepository hechoRepository;&#10;    private final ContribuyenteRepository contribuyenteRepository;&#10;&#10;    public SolicitudService(SolicitudRepository solicitudRepository, HechoRepository hechoRepository, ContribuyenteRepository contribuyenteRepository) {&#10;        this.solicitudRepository = solicitudRepository;&#10;        this.hechoRepository = hechoRepository;&#10;        this.contribuyenteRepository = contribuyenteRepository;&#10;    }&#10;&#10;    @Override&#10;    public SolicitudEliminacion crearSolicitud(SolicitudCreateDTO dto) throws IllegalArgumentException{&#10;        if (dto == null) throw new IllegalArgumentException(&quot;Datos de la solicitud vacios&quot;);&#10;        if (dto.getMotivo() == null || dto.getMotivo().trim().isEmpty()) throw new IllegalArgumentException(&quot;Motivo requerido&quot;);&#10;&#10;        Hecho hecho = hechoRepository.findById(dto.getIdHecho()).orElse(null);&#10;        if (hecho == null) throw new IllegalArgumentException(&quot;Hecho no encontrado&quot;);&#10;&#10;        Contribuyente solicitante = contribuyenteRepository.findById(dto.getIdContribuyente()).orElse(null);&#10;        if (solicitante == null) throw new IllegalArgumentException(&quot;Contribuyente no encontrado&quot;);&#10;&#10;        SolicitudEliminacion solicitud = new SolicitudEliminacion(solicitante, hecho, LocalDate.now(), dto.getMotivo());&#10;        return solicitudRepository.save(solicitud);&#10;    }&#10;&#10;    @Override&#10;    public List&lt;SolicitudEliminacion&gt; listarSolicitudes() {&#10;        return solicitudRepository.findAll();&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package ar.utn.ba.ddsi.apipublica.services;&#10;&#10;import ar.utn.ba.ddsi.apipublica.models.dtos.SolicitudCreateDTO;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.Contribuyente;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.Hecho;&#10;import ar.utn.ba.ddsi.apipublica.models.entities.SolicitudEliminacion;&#10;import ar.utn.ba.ddsi.apipublica.models.repository.ContribuyenteRepository;&#10;import ar.utn.ba.ddsi.apipublica.models.repository.HechoRepository;&#10;import ar.utn.ba.ddsi.apipublica.models.repository.SolicitudRepository;&#10;import org.springframework.stereotype.Service;&#10;&#10;import java.time.LocalDate;&#10;import java.util.List;&#10;&#10;@Service&#10;public class SolicitudService implements ISolicitudService{&#10;&#10;    private final SolicitudRepository solicitudRepository;&#10;    private final HechoRepository hechoRepository;&#10;    private final ContribuyenteRepository contribuyenteRepository;&#10;&#10;    public SolicitudService(SolicitudRepository solicitudRepository, HechoRepository hechoRepository, ContribuyenteRepository contribuyenteRepository) {&#10;        this.solicitudRepository = solicitudRepository;&#10;        this.hechoRepository = hechoRepository;&#10;        this.contribuyenteRepository = contribuyenteRepository;&#10;    }&#10;&#10;    @Override&#10;    public SolicitudEliminacion crearSolicitud(SolicitudCreateDTO dto) throws IllegalArgumentException{&#10;        if (dto == null) throw new IllegalArgumentException(&quot;Datos de la solicitud vacios&quot;);&#10;        if (dto.getMotivo() == null || dto.getMotivo().trim().isEmpty()) throw new IllegalArgumentException(&quot;Motivo requerido&quot;);&#10;&#10;        Hecho hecho = hechoRepository.findById(dto.getIdHecho()).orElse(null);&#10;        if (hecho == null) throw new IllegalArgumentException(&quot;Hecho no encontrado&quot;);&#10;&#10;        Contribuyente solicitante = contribuyenteRepository.findById(dto.getIdContribuyente()).orElse(null);&#10;        if (solicitante == null) throw new IllegalArgumentException(&quot;Contribuyente no encontrado&quot;);&#10;&#10;        SolicitudEliminacion solicitud = new SolicitudEliminacion(solicitante, hecho, LocalDate.now(), dto.getMotivo());&#10;        return solicitudRepository.save(solicitud);&#10;    }&#10;&#10;    @Override&#10;    public List&lt;SolicitudEliminacion&gt; listarSolicitudes() {&#10;        return solicitudRepository.findAll();&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>